# stl部分使用注意事项

ps：此部分为sdg丁总给出，也有自己发现，以此做记录，以后在使用过程中可受益

##### -  vector如果要用大量的数据，那么可以使用reserve一次把内存申请出来，否则后续的再申请和拷贝是很耗时的。

##### - 用data()取代&(v[0])，这样可以防止，如果为空的话&(v[0])可能会引起程序崩溃（话说之前我好像这么写过一次。。。。）

##### - 用emplace_back来代替push_back，说白了这个就是对象引用直接转移对象的使用者，类似move，可以减少一次拷贝。

##### - vector拷贝后前面的数据不需要使用时用swap取代=

##### - 大量删除元素时用remove或remove_if取代erase，因为erase效率很差，删掉后需要移动vector里面的元素，remove行为具体看之前写的vector里，可以直接remove后用resize重置一下size大小就可以很快速的实现大量元素的删除。

##### - vector如果作为临时变量的函数被高频调用，可以声明成成员变量或static如果多线程都会调用的话，可以使用关键字thread_local。static thread_local vector<int> v，可以防止反复的内存申请与释放，导致耗时增加，举例

##### - 同样，list，set，map也用emplace_back取代push_back，同时emplace取代push。

##### - stl迭代器失效，循环删除时，删除函数会返回删除后的下一个迭代器，记着使用这个迭代器去继续循环。

##### - list的size在一些老版本的sdk里面实现是用循环查找的方式实现的，算法复杂度在o(n)，如果使用这个函数不稍加注意可能会被坑到。

##### - 遍历vector时使用下表而不是迭代器，迭代器的效率不如下标。

